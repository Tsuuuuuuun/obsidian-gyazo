/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var g=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var m=Object.prototype.hasOwnProperty;var T=(i,e)=>{for(var t in e)g(i,t,{get:e[t],enumerable:!0})},k=(i,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of w(e))!m.call(i,o)&&o!==t&&g(i,o,{get:()=>e[o],enumerable:!(s=h(e,o))||s.enumerable});return i};var f=i=>k(g({},"__esModule",{value:!0}),i);var S={};T(S,{default:()=>c});module.exports=f(S);var a=require("obsidian"),z={accessToken:""},c=class extends a.Plugin{async onload(){await this.loadSettings(),this.addRibbonIcon("image","Upload to Gyazo",async()=>{await this.uploadToGyazo()}),this.addCommand({id:"upload-to-gyazo",name:"Upload to Gyazo",editorCallback:async(t,s)=>{await this.uploadToGyazo()}}),this.addSettingTab(new l(this.app,this))}onunload(){}async loadSettings(){this.settings=Object.assign({},z,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}async uploadToGyazo(){if(!this.settings.accessToken){new a.Notice("Please set your Gyazo access token in the settings.");return}try{let s=(await navigator.clipboard.read()).find(n=>n.types.includes("image/png")||n.types.includes("image/jpeg"));if(!s){new a.Notice("No image found in clipboard.");return}let o=await s.getType("image/png"),d=new FormData;d.append("access_token",this.settings.accessToken),d.append("imagedata",o);let p=await fetch("https://upload.gyazo.com/api/upload",{method:"POST",body:d});if(!p.ok)throw new Error("Failed to upload image");let r=await p.json(),u=this.app.workspace.getActiveViewOfType(a.MarkdownView);if(u){let n=u.editor,y=`![${r.image_id}](${r.url})`;n.replaceSelection(y),new a.Notice("Image uploaded successfully!")}}catch(t){new a.Notice("Failed to upload image: "+t.message)}}},l=class extends a.PluginSettingTab{constructor(t,s){super(t,s);this.plugin=s}display(){let{containerEl:t}=this;t.empty(),new a.Setting(t).setName("Gyazo Access Token").setDesc("Enter your Gyazo access token").addText(s=>s.setPlaceholder("Enter your access token").setValue(this.plugin.settings.accessToken).onChange(async o=>{this.plugin.settings.accessToken=o,await this.plugin.saveSettings()}))}};
